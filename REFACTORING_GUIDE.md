# ๐๏ธ ุงูุจููุฉ ุงูุฌุฏูุฏุฉ ูููุดุฑูุน

## ๐ ูููู ุงููุฌูุฏุงุช

```
tttrrrrrrrrrrr/
โโโ app.py                          # ๐ด ุงูุชุทุจูู ุงูุฑุฆูุณู (ุงูุชุดุบูู ููุท)
โโโ config.py                       # โ๏ธ ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ
โโโ extensions.py                   # ๐ง ุงูููุญูุงุช ูุงูุชููุฆุฉ
โโโ firebase_utils.py               # ๐ฅ ุฃุฏูุงุช Firebase
โโโ payment.py                      # ๐ณ ูุธุงู ุงูุฏูุน
โโโ utils.py                        # ๐๏ธ ุงูุฏูุงู ุงููุณุงุนุฏุฉ
โ
โโโ handlers/                       # ๐ฅ ูุนุงูุฌุงุช ุงูุจูุช ูุงูููุจ
โ   โโโ __init__.py
โ   โโโ telegram_handlers.py       # ูุนุงูุฌุงุช ุจูุช Telegram
โ
โโโ services/                       # ๐ข ุทุจูุฉ ุงูุฎุฏูุงุช (Business Logic)
โ   โโโ __init__.py
โ   โโโ user_service.py            # ุฎุฏูุงุช ุงููุณุชุฎุฏููู
โ   โโโ product_service.py         # ุฎุฏูุงุช ุงูููุชุฌุงุช
โ   โโโ payment_service.py         # ุฎุฏูุงุช ุงูุฏูุน
โ
โโโ routes/                         # ๐ฃ๏ธ ูุณุงุฑุงุช Flask (Blueprints)
โ   โโโ __init__.py
โ   โโโ cart.py                    # ูุณุงุฑุงุช ุงูุณูุฉ
โ   โโโ wallet.py                  # ูุณุงุฑุงุช ุงููุญูุธุฉ
โ   โโโ admin.py                   # ูุณุงุฑุงุช ููุญุฉ ุงูุชุญูู
โ
โโโ templates/                      # ๐ ุตูุญุงุช HTML
โ   โโโ index.html
โ   โโโ cart.html
โ   โโโ wallet.html
โ   โโโ login.html
โ   โโโ purchases.html
โ   โโโ admin_products.html
โ   โโโ admin_categories.html
โ   โโโ admin_invoices.html
โ
โโโ requirements.txt               # ๐ฆ ุงูููุชุจุงุช ุงููุทููุจุฉ
```

---

## ๐ฏ ุดุฑุญ ูู ูุฌูุฏ

### ๐ฅ **handlers/** - ูุนุงูุฌุงุช ุงูุทูุจุงุช
- **telegram_handlers.py**: ุฌููุน ูุนุงูุฌุงุช ุจูุช Telegram (@bot decorators)
  - `@bot.message_handler` - ูุนุงูุฌุงุช ุงูุฑุณุงุฆู
  - `@bot.callback_query_handler` - ูุนุงูุฌุงุช ุฃุฒุฑุงุฑ Inline
  - ุฏูุงู ูุณุงุนุฏุฉ ูุฅูุดุงุก ูุณุชุฎุฏููู ูุฃููุงุฏ ุชุญูู

### ๐ข **services/** - ุทุจูุฉ ุงูุฎุฏูุงุช (Business Logic)
ููุง ุชูุถุน ููุทู ุงูุจุฑูุงูุฌ ุงูุฃุณุงุณู:

- **user_service.py** - `UserService`
  - ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู
  - ุฅุฏุงุฑุฉ ุงูุฑุตูุฏ
  - ุชุญุฏูุซ ูุนูููุงุช ุงููุณุชุฎุฏู

- **product_service.py** - `ProductService`
  - ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช ูุงููุฆุงุช
  - ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงูููุชุฌุงุช
  - ุฌูุจ ููุงุฆู ุงูููุชุฌุงุช

- **payment_service.py** - `PaymentService`
  - ุฅูุดุงุก ุงูููุงุชูุฑ
  - ุงูุชุญูู ูู ุตุญุฉ ุงูุฏูุน
  - ุญุณุงุจ Hash ุงูุฏูุน ุงูุขูู

### ๐ฃ๏ธ **routes/** - ูุณุงุฑุงุช Flask
- **cart.py** - ูุณุงุฑุงุช ุงูุณูุฉ (/cart, /api/cart/*)
- **wallet.py** - ูุณุงุฑุงุช ุงููุญูุธุฉ (/wallet, /api/wallet/*)
- **admin.py** - ูุณุงุฑุงุช ููุญุฉ ุงูุชุญูู (/admin/*)

### ๐ **templates/** - ุตูุญุงุช HTML
- ุตูุญุงุช ุงูููุจ ูุงููุงุฌูุงุช
- ูููุงุช CSS ู JavaScript

---

## ๐ ุชุฏูู ุงูุจูุงูุงุช

```
Telegram User
      โ
handlers/telegram_handlers.py  โ ูุณุชูุจู ุงูุฑุณุงุฆู
      โ
services/*_service.py         โ ูุนุงูุฌุฉ ุงูุจูุงูุงุช
      โ
firebase_utils.py             โ ุชุฎุฒูู/ุงุณุชุฑุฌุงุน ูู Firebase
      โ
Database (Firebase)
```

---

## ๐ ูุซุงู ุนูู ููููุฉ ุงุณุชุฎุฏุงู ุงูุฎุฏูุงุช

```python
from services import UserService, ProductService
from extensions import db
import firebase_utils

# ุฅูุดุงุก instance ูู ุงูุฎุฏูุฉ
user_service = UserService(db, firebase_utils)
product_service = ProductService(db, firebase_utils)

# ุงุณุชุฎุฏุงู ุงูุฎุฏูุงุช
balance = user_service.get_balance(user_id=123)
user_service.add_balance(user_id=123, amount=100)

products = product_service.get_all_products()
product_service.add_product({
    'item_name': 'Netflix',
    'price': 19.99,
    'category': 'streaming',
    # ... ุจูุงูุงุช ุฃุฎุฑู
})
```

---

## ๐ ุฎุทูุงุช ุงูุชุดุบูู

1. **ุชุซุจูุช ุงูููุชุจุงุช:**
   ```bash
   pip install -r requirements.txt
   ```

2. **ุชุญุฏูุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ:**
   ```bash
   export BOT_TOKEN="your_token_here"
   export ADMIN_ID="your_admin_id"
   export SITE_URL="http://localhost:5000"
   ```

3. **ุชุดุบูู ุงูุชุทุจูู:**
   ```bash
   python3 app.py
   ```

---

## โจ ุงูููุงุฆุฏ ุงูุฑุฆูุณูุฉ

โ **ูุตู ุงูุงูุชูุงูุงุช** - ูู ููู ูู ูุณุคูููุฉ ูุงุญุฏุฉ  
โ **ุณูููุฉ ุงูุตูุงูุฉ** - ุชุนุฏูู ุฃู ุฌุฒุก ุจุฏูู ุงูุชุฃุซูุฑ ุนูู ุงูุขุฎุฑูู  
โ **ุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู** - ุงูุฎุฏูุงุช ูููู ุงุณุชุฎุฏุงููุง ูู ุฃูุงูู ูุชุนุฏุฏุฉ  
โ **ุงูุงุฎุชุจุงุฑ** - ุณูู ูุชุงุจุฉ unit tests ููู ุฎุฏูุฉ  
โ **ุงูุชูุณุน** - ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ ุจุณูููุฉ  
โ **ุงูุชุนุงูู** - ูุฑูู ูุชุนุฏุฏ ูุนูู ุนูู ูููุงุช ูุฎุชููุฉ  

---

## ๐ ููุงุญุธุงุช ูููุฉ

- `app.py` ุงูุขู ูุญุชูู ููุท ุนูู **ุงูุชููุฆุฉ ูุงูุชุดุบูู**
- ุฌููุน **ูุนุงูุฌุงุช ุงูุจูุช** ูู `handlers/`
- ุฌููุน **ููุทู ุงูุจุฑูุงูุฌ** ูู `services/`
- ุฌููุน **ูุณุงุฑุงุช ุงูููุจ** ูู `routes/`
- ุฌููุน **ุงูุฏูุงู ุงููุณุงุนุฏุฉ** ูู `utils.py`

---

**ุชู ุงูุชุญุฏูุซ: 2025-12-28**
