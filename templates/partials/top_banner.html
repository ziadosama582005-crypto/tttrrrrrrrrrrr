{# Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯ Ù…Ø¹ Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø­Ø³Ø§Ø¨ #}
<style>
  /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
  .main-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    border-bottom: 1px solid rgba(108, 92, 231, 0.3);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 15px;
    z-index: 999;
    box-shadow: 0 2px 15px rgba(0, 0, 0, 0.3);
  }
  
  .header-right {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .header-center {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
  }
  
  .header-logo {
    font-size: 22px;
    font-weight: bold;
    color: #fff;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .header-left {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .header-btn {
    background: rgba(108, 92, 231, 0.2);
    border: 1px solid rgba(108, 92, 231, 0.4);
    color: #fff;
    width: 40px;
    height: 40px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s;
    font-size: 18px;
    text-decoration: none;
  }
  
  .header-btn:hover {
    background: rgba(108, 92, 231, 0.4);
    border-color: #6c5ce7;
    transform: scale(1.05);
  }
  
  .header-btn.account-btn {
    width: auto;
    padding: 0 12px;
    gap: 6px;
    font-size: 14px;
  }
  
  .menu-btn {
    flex-direction: column;
    gap: 4px;
  }
  
  .menu-btn span {
    width: 18px;
    height: 2px;
    background: #fff;
    border-radius: 2px;
    transition: all 0.3s;
  }
  
  /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
  .side-menu-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 1000;
  }
  
  .side-menu-overlay.show {
    display: block;
  }
  
  .side-menu {
    position: fixed;
    top: 0;
    right: -280px;
    width: 280px;
    height: 100%;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    z-index: 1001;
    transition: right 0.3s ease;
    overflow-y: auto;
    border-left: 1px solid rgba(108, 92, 231, 0.3);
  }
  
  .side-menu.show {
    right: 0;
  }
  
  .side-menu-header {
    padding: 20px;
    border-bottom: 1px solid rgba(108, 92, 231, 0.3);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .side-menu-header h3 {
    color: #fff;
    font-size: 18px;
  }
  
  .close-menu-btn {
    background: none;
    border: none;
    color: #888;
    font-size: 24px;
    cursor: pointer;
  }
  
  .side-menu-content {
    padding: 15px;
  }
  
  .menu-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 15px;
    color: #fff;
    text-decoration: none;
    border-radius: 10px;
    margin-bottom: 5px;
    transition: all 0.3s;
  }
  
  .menu-item:hover {
    background: rgba(108, 92, 231, 0.2);
  }
  
  .menu-divider {
    height: 1px;
    background: rgba(108, 92, 231, 0.2);
    margin: 15px 0;
  }
  
  /* Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¨Ø­Ø« */
  .search-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.9);
    z-index: 1002;
    padding: 20px;
  }
  
  .search-overlay.show {
    display: block;
  }
  
  .search-container {
    max-width: 600px;
    margin: 80px auto 0;
  }
  
  .search-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }
  
  .search-header h3 {
    color: #fff;
    font-size: 20px;
  }
  
  .close-search-btn {
    background: none;
    border: none;
    color: #888;
    font-size: 28px;
    cursor: pointer;
  }
  
  .search-input-wrapper {
    position: relative;
  }
  
  .search-input {
    width: 100%;
    padding: 15px 50px 15px 20px;
    border: 2px solid rgba(108, 92, 231, 0.5);
    border-radius: 15px;
    background: rgba(26, 26, 46, 0.9);
    color: #fff;
    font-size: 16px;
    font-family: inherit;
  }
  
  .search-input:focus {
    outline: none;
    border-color: #6c5ce7;
  }
  
  .search-icon-inside {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #6c5ce7;
    font-size: 20px;
  }
  
  .search-results {
    margin-top: 20px;
    max-height: 400px;
    overflow-y: auto;
  }
  
  .search-result-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    background: rgba(26, 26, 46, 0.8);
    border-radius: 12px;
    margin-bottom: 10px;
    text-decoration: none;
    color: #fff;
    transition: all 0.3s;
  }
  
  .search-result-item:hover {
    background: rgba(108, 92, 231, 0.2);
    transform: translateX(-5px);
  }
  
  .search-result-img {
    width: 50px;
    height: 50px;
    border-radius: 8px;
    object-fit: cover;
  }
  
  .search-result-info h4 {
    font-size: 14px;
    margin-bottom: 5px;
  }
  
  .search-result-info p {
    font-size: 12px;
    color: #6c5ce7;
  }
  
  .no-results {
    text-align: center;
    color: #888;
    padding: 30px;
  }
  
  /* ØªØµØ­ÙŠØ­ padding Ù„Ù„ØµÙØ­Ø© */
  body {
    padding-top: 70px;
  }
</style>

<!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
<header class="main-header">
  <div class="header-right">
    <button class="header-btn menu-btn" onclick="toggleSideMenu()">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <a href="/profile" class="header-btn account-btn">
      ğŸ‘¤ <span>Ø­Ø³Ø§Ø¨ÙŠ</span>
    </a>
  </div>
  
  <div class="header-center">
    <a href="/" class="header-logo">
      ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±
    </a>
  </div>
  
  <div class="header-left">
    <button class="header-btn" onclick="openSearch()">ğŸ”</button>
  </div>
</header>

<!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
<div class="side-menu-overlay" id="sideMenuOverlay" onclick="toggleSideMenu()"></div>
<div class="side-menu" id="sideMenu">
  <div class="side-menu-header">
    <h3>Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h3>
    <button class="close-menu-btn" onclick="toggleSideMenu()">âœ•</button>
  </div>
  <div class="side-menu-content">
    <a href="/" class="menu-item">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="/cart" class="menu-item">ğŸ›’ Ø§Ù„Ø³Ù„Ø©</a>
    <a href="/profile" class="menu-item">ğŸ‘¤ Ø­Ø³Ø§Ø¨ÙŠ</a>
    <a href="/purchases" class="menu-item">ğŸ“¦ Ù…Ø´ØªØ±ÙŠØ§ØªÙŠ</a>
    <a href="/wallet" class="menu-item">ğŸ’° Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
    <div class="menu-divider"></div>
    <div id="menuCategories"></div>
  </div>
</div>

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¨Ø­Ø« -->
<div class="search-overlay" id="searchOverlay">
  <div class="search-container">
    <div class="search-header">
      <h3>Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
      <button class="close-search-btn" onclick="closeSearch()">âœ•</button>
    </div>
    <div class="search-input-wrapper">
      <input type="text" class="search-input" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬..." oninput="performSearch(this.value)">
      <span class="search-icon-inside">ğŸ”</span>
    </div>
    <div class="search-results" id="searchResults"></div>
  </div>
</div>

<script>
  // Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
  function toggleSideMenu() {
    document.getElementById('sideMenu').classList.toggle('show');
    document.getElementById('sideMenuOverlay').classList.toggle('show');
  }
  
  // Ø§Ù„Ø¨Ø­Ø«
  function openSearch() {
    document.getElementById('searchOverlay').classList.add('show');
    document.getElementById('searchInput').focus();
  }
  
  function closeSearch() {
    document.getElementById('searchOverlay').classList.remove('show');
    document.getElementById('searchInput').value = '';
    document.getElementById('searchResults').innerHTML = '';
  }
  
  // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø²Ø± Escape
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closeSearch();
      document.getElementById('sideMenu').classList.remove('show');
      document.getElementById('sideMenuOverlay').classList.remove('show');
    }
  });
  
  // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
  async function performSearch(query) {
    const resultsContainer = document.getElementById('searchResults');
    
    if (query.length < 2) {
      resultsContainer.innerHTML = '';
      return;
    }
    
    try {
      const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
      const products = await response.json();
      
      if (products.length === 0) {
        resultsContainer.innerHTML = '<div class="no-results">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>';
        return;
      }
      
      resultsContainer.innerHTML = products.map(p => `
        <a href="/product/${p.id}" class="search-result-item" onclick="closeSearch()">
          <img src="${p.image || '/static/placeholder.png'}" class="search-result-img" alt="${p.name}">
          <div class="search-result-info">
            <h4>${p.name}</h4>
            <p>${p.price} Ø±.Ø³</p>
          </div>
        </a>
      `).join('');
    } catch (e) {
      resultsContainer.innerHTML = '<div class="no-results">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«</div>';
    }
  }
  
  // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ¦Ø§Øª ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
  async function loadMenuCategories() {
    try {
      const cats = window.categoriesData || [];
      const container = document.getElementById('menuCategories');
      
      if (cats.length === 0) return;
      
      container.innerHTML = '<div style="padding: 5px 15px; color: #6c5ce7; font-size: 12px; margin-bottom: 5px;">Ø§Ù„ÙØ¦Ø§Øª</div>';
      cats.forEach(cat => {
        container.innerHTML += `<a href="/t/${cat.id}" class="menu-item">ğŸ“ ${cat.name}</a>`;
      });
    } catch (e) {
      console.error('Error loading categories:', e);
    }
  }
  
  // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ¦Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
  document.addEventListener('DOMContentLoaded', loadMenuCategories);
</script>
